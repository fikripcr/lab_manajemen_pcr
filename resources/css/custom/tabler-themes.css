/* 
 * Shared Tabler Customization & Dynamic Logic
 * Merged from theme-customization.css and theme-dynamic.css
 * Contains: Fonts, Card Styles, Layout Systems, and Auto-Contrast Logic.
 * Import this file in Sys, Admin, or other sections to apply full theme behaviors.
 */


/* ==========================================================================
   1. BASE CUSTOMIZATIONS (Fonts, Cards, Global Tweaks)
   ========================================================================== */

/* Fix issue with margin-left on scroll window */
@media (min-width: 992px) {

    :host,
    :root {
        margin-left: 0 !important;
        margin-right: 0 !important;
    }
}

/* --- Font Family Overrides --- */
[data-bs-theme-font="inter"] {
    --tblr-font-sans-serif: 'Inter', -apple-system, BlinkMacSystemFont, San Francisco, Segoe UI, Roboto, Helvetica Neue, sans-serif;
}

[data-bs-theme-font="roboto"] {
    --tblr-font-sans-serif: 'Roboto', -apple-system, BlinkMacSystemFont, San Francisco, Segoe UI, Helvetica Neue, sans-serif;
}

[data-bs-theme-font="poppins"] {
    --tblr-font-sans-serif: 'Poppins', -apple-system, BlinkMacSystemFont, San Francisco, Segoe UI, Roboto, Helvetica Neue, sans-serif;
}

[data-bs-theme-font="public-sans"] {
    --tblr-font-sans-serif: 'Public Sans', -apple-system, BlinkMacSystemFont, San Francisco, Segoe UI, Roboto, Helvetica Neue, sans-serif;
}

[data-bs-theme-font="nunito"] {
    --tblr-font-sans-serif: 'Nunito', -apple-system, BlinkMacSystemFont, San Francisco, Segoe UI, Roboto, Helvetica Neue, sans-serif;
}

/* --- Card Customizations --- */
.card {
    border-radius: var(--tblr-border-radius, 0.5rem) !important;
}

.card-header {
    border-radius: var(--tblr-border-radius, 0.5rem) var(--tblr-border-radius, 0.5rem) 0 0 !important;
}

/* Card Styles */
/* Flat: No shadow, standard border */
[data-bs-card-style="flat"] .card {
    box-shadow: none !important;
    border: 1px solid var(--tblr-border-color) !important;
}

/* Shadow: Floating effect, no border */
[data-bs-card-style="shadow"] .card {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
    border: none !important;
}

/* Border: Prominent border, no shadow */
[data-bs-card-style="border"] .card {
    box-shadow: none !important;
    border: 1px solid rgba(var(--tblr-body-color-rgb), 0.16) !important;
}

/* Modern: Soft large shadow, rounded corners */
[data-bs-card-style="modern"] .card {
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
    border: none !important;
    border-radius: 12px !important;
}

[data-bs-card-style="modern"] .card-header {
    border-radius: 12px 12px 0 0 !important;
}


/* ==========================================================================
   2. COMPONENT CUSTOMIZATIONS
   ========================================================================== */

/* Navbar Brand Image Sizing */
.navbar-brand-image {
    height: 2rem;
    width: auto;
}

/* DataTable Processing Indicator - Match Theme Primary */
div.dt-processing>div:last-child>div {
    position: absolute;
    top: 0;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: var(--tblr-primary) !important;
    animation-timing-function: cubic-bezier(0, 1, 1, 0)
}


/* ==========================================================================
   3. LAYOUT SYSTEMS
   ========================================================================== */

/* --- Container Width: Fluid --- */
[data-container-width="fluid"] .container-xl,
[data-container-width="fluid"] .container {
    max-width: 100% !important;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
}

/* --- Layout: Boxed --- */
body.layout-boxed {
    background-color: var(--tblr-boxed-bg, #e2e8f0);
}

/* Page Container Setup */
body.layout-boxed .page {
    background-color: var(--tblr-body-bg, var(--tblr-bg-surface, #ffffff)) !important;
    max-width: 1320px;
    margin: 0 auto 2rem auto;
    box-shadow: 0 0 2rem rgba(0, 0, 0, 0.1);
    position: relative;
    z-index: 0;
}

/* Fix Sidebar Positioning in Boxed Layout */
@media (min-width: 992px) {
    body.layout-boxed .navbar-vertical {
        position: absolute !important;
        left: 0;
        top: 0;
        bottom: 0;
        height: auto;
        z-index: 1030;
    }
}

/* Ensure inner wrappers are transparent so Overlap BG is visible */
.layout-boxed .page-wrapper,
.layout-boxed .page-body {
    background-color: transparent !important;
}


/* --- Layout: Navbar Overlap --- */
.navbar-overlap {
    box-shadow: none !important;
    border-bottom: none !important;
    position: relative;
}

[data-bs-has-header-overlap-bg] .navbar-overlap::after {
    background-color: var(--tblr-header-overlap-bg) !important;
    background-image: none !important;
    z-index: -1 !important;
    height: 10rem !important;
}

/* Sticky Header in Overlap Mode */
body.layout-navbar-overlap header.navbar.sticky-top {
    background-color: var(--tblr-bg-surface-dark);
}

body.layout-navbar-overlap[data-bs-has-header-top-bg] header.navbar.sticky-top {
    background-color: var(--tblr-header-top-bg) !important;
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}


/* ==========================================================================
   4. DYNAMIC THEME & AUTO-CONTRAST SYSTEM
   ========================================================================== */

/* --- Sidebar --- */
:root[data-bs-has-sidebar-bg] .navbar-vertical {
    background-color: var(--tblr-sidebar-bg) !important;
    box-shadow: none !important;
}

:root[data-bs-has-sidebar-bg] header.navbar-expand-md .navbar {
    background-color: var(--tblr-sidebar-bg) !important;
}

/* Light Theme Default Text Colors */
[data-bs-theme="light"] .navbar-vertical .nav-link {
    color: var(--tblr-dark, #1e293b) !important;
}

[data-bs-theme="light"] .navbar-vertical .nav-link:hover,
[data-bs-theme="light"] .navbar-vertical .nav-link.active {
    color: var(--tblr-primary, #206bc4) !important;
}

[data-bs-theme="light"] .navbar-vertical .nav-link-title {
    color: var(--tblr-muted, #6c757d) !important;
}

/* Auto-Contrast Override */
:root[data-bs-has-sidebar-bg] .navbar-vertical .navbar-brand,
:root[data-bs-has-sidebar-bg] .navbar-vertical .nav-link,
:root[data-bs-has-sidebar-bg] .navbar-vertical .dropdown-toggle,
:root[data-bs-has-sidebar-bg] .navbar-vertical .nav-link-icon,
:root[data-bs-has-sidebar-bg] .navbar-vertical .dropdown-menu .dropdown-item {
    color: var(--tblr-sidebar-text) !important;
}

:root[data-bs-has-sidebar-bg] .navbar-vertical .nav-link-title,
:root[data-bs-has-sidebar-bg] .navbar-vertical .dropdown-menu .dropdown-item-icon {
    color: var(--tblr-sidebar-text-muted) !important;
}


/* --- Header Top --- */
[data-bs-has-header-top-bg] .navbar {
    background-color: var(--tblr-header-top-bg) !important;
    background-image: none !important;
}

[data-bs-has-header-top-bg] .navbar .nav-link,
[data-bs-has-header-top-bg] .navbar .navbar-brand,
[data-bs-has-header-top-bg] .navbar .btn,
[data-bs-has-header-top-bg] .navbar .nav-item {
    color: var(--tblr-header-top-text) !important;
}

[data-bs-has-header-top-bg] .navbar .text-secondary,
[data-bs-has-header-top-bg] .navbar .text-muted {
    color: var(--tblr-header-top-text-muted) !important;
}


/* --- Page Header & Body --- */
:root[data-bs-has-theme-bg] .page-header .page-title,
:root[data-bs-has-theme-bg] .page-header .page-pretitle,
:root[data-bs-has-theme-bg] .breadcrumb-item,
:root[data-bs-has-theme-bg] .breadcrumb-item a,
:root[data-bs-has-theme-bg] .breadcrumb-item.active,
:root[data-bs-has-theme-bg] .footer,
:root[data-bs-has-theme-bg] .footer a:not(.btn) {
    color: var(--tblr-body-text) !important;
}

:root[data-bs-has-theme-bg] .breadcrumb-item+.breadcrumb-item::before {
    color: var(--tblr-body-text) !important;
    opacity: 0.7;
}